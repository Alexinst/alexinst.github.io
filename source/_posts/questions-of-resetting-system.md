---
title: 重装系统中遇到的麻烦
date: 2018-06-12 21:37:14
categories:
    - Experience
tags:
    - experience
    - system
    - GPT
    - MBR
---

**简述**：每次重装系统都是一次全新的“体验”。这次遇到的麻烦是`UEFI`和`legacy`，`GPT`硬盘和`MBR`硬盘的冲突。重装完系统后还出现无法从硬盘启动（reboot and select proper boot device）的问题。

<!-- more -->
<br />

# 1 UEFI方式和MBR格式的冲突
## 1.1 问题描述

　　选择win10安装版本和格式化驱动器0之后，点击下一步时，出现如下错误：
>Windows无法安装到这个磁盘。选中的磁盘具有MBR分区表。在EFI系统上，Windows只能安装到GPT磁盘。

## 1.2 原因

　　win8/win10系统均添加快速启动功能，预装的win8/win10电脑默认都是`UEFI`引导和`GPT`硬盘，传统的引导方式为`Legacy`引导和`MBR`硬盘，`UEFI`必须跟`GPT`对应，同理`Legacy`必须跟`MBR`对应。

　　如果BIOS开启`UEFI`，而硬盘分区表格式为`MBR`则无法安装；BIOS关闭`UEFI`而硬盘分区表格式为`GPT`也是无法安装Windows。

　　(注意事项：转换分区表格式会清空硬盘所有数据!)

## 1.3 解决办法

　　因为重装win10系统使用的`UEFI`引导方法，所以需要把驱动器0从`MBR`转化到`GPT`。解决步骤：

　　（1）在当前安装界面按住`Shift`+`F10`，唤出命令提示符窗口；

　　（2）输入`diskpark`，回车，进入`DISKPART`模式；

　　（3）输入`list disk`，回车，列出当前磁盘信息；

　　（4）输入`select disk 0`，回车，选中驱动器0；

　　（5）输入`clean`，回车，删除驱动器0的分区；

　　（6）输入`convert gpt`，回车，驱动器0转化为`GPT`格式，之后关闭命令提示符窗口即可。

<br />
# 2 无法从硬盘启动

## 2.1 问题描述

　　成功重装系统后，开机时出现如下提示：
>Reboot and Select proper Boot device
>or Insert Boot Media in Selected device_

## 2.2 解决办法

　　很懵逼！

　　最后尝试性地在Bios中的Advanced，将`OS support`从`Legacy OS`改成`UEFI OS`，保存后退出。这次启动，就成功进入win10系统。

　　原因，应该还是引导办法不对。但不知道为何，我明明成功在`GPT`格式硬盘上安装系统了，这说明引导方式是`UEFI`，但却还是发生这个错误。



<br />

# 3 名词解释

>MBR—-Master Boot Record（主引导扇区）
> 
>之所以叫“主引导扇区”，是因为它是存在于驱动器开始部分的一个特殊的启动扇区。这个扇区包含了已安装的操作系统的启动加载器和驱动器的逻辑分区信息。所谓启动加载器，是一小段代码，用于加载驱动器上其他分区上更大的加载器。
>
>如果你安装了Windows，Windows启动加载器的初始信息就放在这个区域里——如果MBR的信息被覆盖导致Windows不能启动，你就需要使用Windows的MBR修复功能来使其恢复正常。如果你安装了Linux，则位于MBR里的通常会是GRUB加载器。 
>
>MBR支持最大2TB磁盘，它无法处理大于2TB容量的磁盘。MBR还只支持最多4个主分区——如果你想要更多分区，你需要创建所谓“扩展分区”，并在其中创建逻辑分区。 

-
>GPT—-GUID Partition Table（全局唯一标识分区表）
>
>这是一个正逐渐取代MBR的新标准。它和UEFI相辅相成——UEFI用于取代老旧的BIOS，而GPT则取代老旧的MBR。之所以叫作“GUID分区表”，是因为你的驱动器上的每个分区都有一个全局唯一的标识符（globally unique identifier，GUID）——这是一个随机生成的字符串，可以保证为地球上的每一个GPT分区都分配完全唯一的标识符。 
>
>这个标准没有MBR的那些限制。磁盘驱动器容量可以大得多，大到操作系统和文件系统都没法支持。它同时还支持几乎无限个分区数量，限制只在于操作系统——Windows支持最多128个GPT分区，而且你还不需要创建扩展分区。 
>
>在MBR磁盘上，分区和启动信息是保存在一起的。如果这部分数据被覆盖或破坏，事情就麻烦了。相对的，GPT在整个磁盘上保存多个这部分信息的副本，因此它更为健壮，并可以恢复被破坏的这部分信息。
>
>GPT还为这些信息保存了循环冗余校验码（CRC）以保证其完整和正确——如果数据被破坏，GPT会发觉这些破坏，并从磁盘上的其他地方进行恢复。而MBR则对这些问题无能为力——只有在问题出现后，你才会发现计算机无法启动，或者磁盘分区都不翼而飞了。













